<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="shortcut icon"
      href="data:image/svg+xml, %3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Ccircle r='8' cx='8' cy='8' fill='%23c1f3f9'%3E%3C/circle%3E%3C/svg%3E"
    />
    <title>UIx | Components</title>
    <link rel="preconnect" href="https://rsms.me/" />
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />
    <link rel="stylesheet" href="main.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css"
    />
  </head>
  <body>
    <header class="page-header">
      <div class="page-header-inner">
        <a class="title" href="https://pitch-io.github.io/uix/docs"
          >UIx | Idiomatic ClojureScript interface to modern React.js</a
        >
        <div class="nav">
          <a href="https://github.com/pitch-io/uix">UIx</a>
          <a href="https://www.clojurescript.studio/">Sandbox</a>
          <a href="https://github.com/sponsors/roman01la">Support</a>
          <div class="version">v1.0.0</div>
        </div>
      </div>
    </header>
    <main>
            <h1 class="heading">
            Components
              <a class="anchor" href="#components">
                <img src="/link.svg" alt="" />
              </a>
            </h1><p>UIx components are defined using the <code>defui</code> macro, which returns React elements created using the <code>$</code> macro. The signature of <code>$</code> macro is similar to <code>React.createElement</code>, with an additional shorthand syntax in the tag name to declare CSS id and class names (similar to Hiccup):</p>
<pre><code class="language-js">// React without JSX
React.createElement(&quot;div&quot;, { onClick: f }, child1, child2);
</code></pre>
<div class="sandbox">
  <iframe
    src="https://www.clojurescript.studio/ee/odd-plump-hospital-2acdaad7"
    style="border: 0; border-radius: 4px; overflow: hidden"
    allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
    sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
  ></iframe>
</div>


            <h2 class="heading">
            Inline components
              <a class="anchor" href="#inline-components">
                <img src="/link.svg" alt="" />
              </a>
            </h2><p>Sometimes you might want to create an inline component using anonymous function. Let&#39;s take a look at the following example:</p>
<pre><code class="language-clojure">(defui ui-list [{{:keys [key-fn data item]}}]
  ($ :div
    (for [x data]
      ($ item {:data x :key (key-fn x)}))))

(defui list-item [{:keys [data]}]
  ($ :div (:id data)))

($ ul-list
  {:key-fn :id
   :data [{:id 1} {:id 2} {:id 3}]
   :item list-item})
</code></pre>
<p>In the example above <code>ul-list</code> takes <code>item</code> props which has to be a <code>defui</code> component, which means you have to declare <code>list-item</code> elsewhere.</p>
<p>With <code>uix.core/fn</code> it becomes less annoying:</p>
<pre><code class="language-clojure">(defui ui-list [{{:keys [key-fn data item]}}]
  ($ :div
    (for [x data]
      ($ item {:data x :key (key-fn x)}))))

($ ul-list
  {:key-fn :id
   :data [{:id 1} {:id 2} {:id 3}]
   :item (uix/fn [{:keys [data]}]
           ($ :div (:id data)))})
</code></pre>

            <h2 class="heading">
            Component props
              <a class="anchor" href="#component-props">
                <img src="/link.svg" alt="" />
              </a>
            </h2><p><code>defui</code> components are similar to React‚Äôs JSX components. They take props and children and provide them within a component as a single map of props.</p>
<p>Let&#39;s take a look at the following example:</p>
<pre><code class="language-js">function Button({ onClick, children }) {
  return &lt;button onClick={onClick}&gt;{children}&lt;/button&gt;;
}

&lt;Button onClick={console.log}&gt;Press me&lt;/Button&gt;;
</code></pre>
<p>The <code>Button</code> component takes JSX attributes and the <code>&quot;Press me&quot;</code> string as a child element. The signature of the component declares a single parameter which is assigned to an object of passed in attributes + child elements stored under the <code>children</code> key.</p>
<p>Similarly in UIx, components take a map of props and an arbitrary number of child element. The signature of <code>defui</code> declares a single parameter which is assigned a hash map of passed in properties + child elements stored under the <code>:children</code> key.</p>
<pre><code class="language-clojure">(defui button [{:keys [on-click children]}]
  ($ :button {:on-click on-click}
    children))

($ button {:on-click js/console.log} &quot;Press me&quot;)
</code></pre>

            <h2 class="heading">
            DOM attributes
              <a class="anchor" href="#dom-attributes">
                <img src="/link.svg" alt="" />
              </a>
            </h2><p>DOM attributes are written as keywords in kebab-case. Values that are normally strings without whitespace can be written as keywords as well, which may improve autocompletion in your IDE.</p>
<pre><code class="language-clojure">($ :button {:title &quot;play button&quot;
            :data-test-id :play-button})
</code></pre>

            <h2 class="heading">
            children
              <a class="anchor" href="#children">
                <img src="/link.svg" alt="" />
              </a>
            </h2><p>Similar to React, child components are passed as <code>children</code> in the props map. <code>children</code> is a JS Array of React elements.</p>
<pre><code class="language-clojure">(defui popover [{:keys [children]}]
  ($ :div.popover children))
</code></pre>

            <h2 class="heading">
            :ref attribute
              <a class="anchor" href="#-ref-attribute">
                <img src="/link.svg" alt="" />
              </a>
            </h2><p><a href="https://reactjs.org/docs/refs-and-the-dom.html">Refs</a> provide a way to refer to DOM nodes. In UIx <code>ref</code> is passed as a normal attribute onto DOM elements, similar to React. <code>use-ref</code> returns a ref with an Atom-like API: the ref can be dereferenced using <code>@</code> and updated with either <code>clojure.core/reset!</code> or <code>clojure.core/swap!</code>.</p>
<pre><code class="language-clojure">(defui form []
  (let [ref (uix.core/use-ref)]
    ($ :form
      ($ :input {:ref ref})
      ($ :button {:on-click #(.focus @ref)}
        &quot;press to focus on input&quot;))))
</code></pre>
<blockquote>
<p>UIx components don&#39;t take refs because they are built on top of React&#39;s function-based components which don&#39;t have instances.</p>
</blockquote>
<p>When you need to pass a ref into child component, pass it as a normal prop.</p>
<pre><code class="language-clojure">(defui text-input [{:keys [ref]}]
  ($ :input {:ref ref}))

(defui form []
  (let [ref (uix.core/use-ref)]
    ($ :form
      ($ text-input {:ref ref})
      ($ :button {:on-click #(.focus @ref)}
        &quot;press to focus on input&quot;))))
</code></pre>

            <h2 class="heading">
            Class-based components
              <a class="anchor" href="#class-based-components">
                <img src="/link.svg" alt="" />
              </a>
            </h2><p>Sometimes you want to create a class-based React component, for example an error boundary. For that there&#39;s the <code>uix.core/create-class</code> function.</p>
<div class="sandbox">
<iframe src="https://www.clojurescript.studio/ee/blue-sparse-cpu-214da257" style="border:0;border-radius:4px;overflow:hidden;" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe>
</div>
</main>
    <footer class="page-footer"><a class="nav-link" href="what-is-uix.html">üëà Prev ‚ÄúWhat Is Uix‚Äù</a> <a class="nav-link" href="elements.html">Next ‚ÄúElements‚Äù üëâ</a></footer>
    <script src="https://unpkg.com/@highlightjs/cdn-assets@11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/clojure.min.js"></script>
    <script>
      hljs.highlightAll();
    </script>
  </body>
</html>
